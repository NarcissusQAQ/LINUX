项目：基于select聊天室
时间：2019/6
作者：李锦龙

![1](https://github.com/NarcissusQAQ/LINUX/blob/master/pic/1.png)
![2](https://github.com/NarcissusQAQ/LINUX/blob/master/pic/2.png)
01.注册子系统分析 
这部分主要是需要与服务器建立连接，然后进入注册功能接口函数选项，将客户端发送来的消息录入保存到数据库中，然后需要向用户返回是否注册成功；如果失败，则返回注册/登录主菜单界面，重新选择注册选项（可以添加失败原因）；
数据库需要提前创建，从注册开始，就有了客户机与服务器之间的通信了，所以有关通信部分也需要提前创建，绑定；

02.登录子系统系统分析 
首先登录系统一定是已经注册过的用户才可以登录成功，所以先要与服务器建立连接，然后服务器接收客户 
端发送过来的登录信息，取出数据库的信息进行匹配，相同登录成功，不同登录失败。登录成功后，进入主菜单选项界面。（可以添加“密码错误”，“忘记密码”进行密码修改等）；

03.修改密码分析 
需要一同修改数据库里的值，所以服务器端需要用到update，而登录的话需要服务器端创建一个全局链表来维持在线用户的信息处理，即登录成功后，需要向链表中添加相应的信息；

04.查看聊天室其他用户系统分析 
客户端登录成功后，选择私聊/群聊选项，进入私聊接口函数，进入此函数后，客户端需要向服务器发送一 
请求附近用户的消息，然后服务器响应，返回已登录好友的信息显示在私聊/群聊的窗口界面；

05.刷新功能分析 
因为是静态显示，所以需要通过刷新来更新显示的数据； 
直接在需要刷新内容前加上通信，即在显示这个信息之前都需要和服务器通信，以获得最新数据；

06.“悄悄话”子系统分析 
主体部分是通信，即从命令行获取数据，发送给服务器，服务器收到信息后，与链表或者数据库进行核实部分数据，确定3件事发送者存在吗？数据合理吗？目标存在吗？这边有与需要向客户机返回服务器处理结果，所以设计大量判断，

07.“群发消息“子系统分析 
大致与悄悄话一样，需要改动的就是目标对象，改为服务器在链表中寻找，找到一个，发送一条；

08.保存消息记录分析 
即对悄悄话内容和群发消息内容的保存，首先需要在悄悄话部分和群发消息部分调用该接口，获得信息存在 一个结构体中，
然后在把这个结构体存入文件中，需要文件io编程，打开文件方式，一个是a+b，一个是r；

09.会员相关功能分析 
创建一个会员标志位，需要写入数据库中； 
踢人，禁言功能
判断该人是否会员，只有会员才能进行这2项操作；其次，判断禁言踢人对象不能是自己，判断禁言踢人对象是否是会员，在线； 
踢人，禁言不同点：禁言即让目标不能使用悄悄话和群发消息功能；踢人即让目标回到登录界面；

10.文件传输功能分析 
让文件通过服务器，从一个客户机发送，再由另一个客户机接收；首先a客户机打开文件，读 
取内容到结构体中，发给服务器，服务器接收文件，转发给b客户机。
需要考虑发送速率和buf大小，打开方式，文件重复情况

11.删除聊天记录文件 
调用remove

12.退出 
双方断开sockfd，pthread_t tid;

13.视频传输
配合opencv在c++的接口，实时传输。
